# General Rules & Regulations

RoboCup Japan Open 2022(以下RCJ2022)のOpen Platformリーグにおける競技は，このページに記載したGeneral Rulesに従って開催されます．
このGeneral Rulesについては，[RoboCup 2022 Rule Book](https://robocupathome.github.io/RuleBook/rulebook/master.pdf) Chapter 3 “General Rules & Regulations” をもとに作成しています．
[RoboCup 2022 Rule Book](https://robocupathome.github.io/RuleBook/rulebook/master.pdf)からの変更で，このページに記載していない事項については，考慮しないものとしています．

<br>

## 1 チーム登録と参加資格
チーム登録(Registration)は日本ロボカップ委員会を通して行われます．RCJ2022では，チーム登録に2つの段階があります．

1. 事前登録

3. 最終登録

事前登録や最終登録についての情報は，RoboCup@Home JPのメーリングリストやSlack上で発表される予定です．この際，チーム選考(Qualification)は行いません．申し込み全チームが参加できます．

### 1.1 事前登録について
RCJ2022における事前登録(OPL，DSPL，Education)は下記のリンクからお願いします．チーム登録締め切りは2月6日となっております．多数のご登録お待ちしております．

:arrow_forward: [事前登録フォーム](https://forms.gle/WoXSpmo4Csi7cLeP6)

なお，各リーグは下記の通り実施いたします．事前登録フォームへの記入の際は，こちらの開催形式を含めて記入してください．よろしくお願いいたします．

- OPL, Education：現地開催のみ
- DSPL：現地・オンラインのハイブリッド開催

### 1.2 最終登録について
RCJ2022における最終登録(OPL，DSPL，Education)は，以下のウェブサイトにある「参加申し込みシート(Excel)」を利用して行います．
詳細は「参加申し込みシート」内の説明をご覧ください．
この際，チームコードは，仮登録時に発行されたものをご利用ください．

:arrow_forward: [最終登録 - 参加申し込みシート](https://www.robocup.or.jp/japanopen2022/ )

<br>

## 2 観客との交流
RoboCup@Homeの魅力の1つは，ロボットが何をすべきか，タスクの中で実際に何を行っているかを観客に見せることでもあります．特に，ロボットが何をしているかという情報を観客に伝えることは，リーグの発展にとっても重要となります．そのため，YouTubeなどの動画配信サービスを用いて，競技の様子を配信することがあります．

<br>

## 3 シナリオ
ほとんどの競技タスクは，RoboCup@Homeのアリーナで行われますが，一部のテストは事前に知らされていない公共の場所のような屋外で行われることもあります．ここでは，アリーナとその内容，特にテストとリーグで共通する道具や家具等について説明します．

### 3.1 アリーナについて
RCJ2022におけるアリーナ情報については，現在準備中です．決まり次第，追記していきます．
<!-- RoboCup@Homeでは，それぞれの場所には，場所クラスが設定されています． -->

ロボットは現実の世界で機能する必要があるため，アリーナは固定されておらず，予告なく変更される場合があります．

1. メジャーチェンジ：日常的な環境では完全に固定されない家具は，競技の間に少し移動されることがあります．家具の配置を変えたり，部屋の中を大きく移動したりすることはありませんが，ソファやテーブルが少し回転したり移動したりする可能性があります．RCJ2022では，そのような家具の位置を固定しません．また，壁は固定され，部屋の構造は変わりませんが，通路は塞がれる可能性があります．

2. マイナーチェンジ：椅子が少し動いたり，ドアが少し閉まったりすることは競技中であっても常に起こることがあります．

### 3.2 人(ユーザーやオペレータ)について
RoboCup@Homeでは，人の名前を使用したタスクがあります．アリーナにいるすべての人には，事前に定義された名前が割り当てられています．

### 3.3 物体について
RoboCup@Homeでは，物体の認識と操作を伴うタスクがあります．このタスクで使用する9個の物体のリストを作成しています．物体リストは下記のリンクから確認できます．リストには，各物体の写真，正式名称，物体カテゴリ(例えば，AppleはFruitsカテゴリに属す)が記載されます．ほとんどのオブジェクトは軽量で，ロボットが簡単に掴める物になっています．各物体のカテゴリーごとに，設置されている場所や，片づけるべき場所が決まっています．このカテゴリを参照することで，競技中にそのカテゴリの物体を見つけたり，片づけたりしていきます．物体を加工することは許されませんので，気を付けてください．

また，競技タスクでは，物体を「既知の物体」と「未知の物体」として分けて使用していきます．このとき，既知の物体とは，下記の物体リストで公開している物体のことを指しています．また，未知の物体とは，物体リストにない物体で，把持・操作可能なものを指しています．競技タスクによっては，この未知の物体を使用することがあります．

:arrow_forward: [物体リスト(RCAP2021で使用された物体)](https://github.com/RoboCupAtHomeJP/AtHome2021/blob/master/Data/opl_known_object_list.pdf)

- 検討事項
  - 競技本番は，各チームが持ち寄せた物体を用いるべきか？

### 3.4 無線ネットワークについて
無線通信として，アリーナ環境にあるネットワークが提供されています．ただし，ネットワークの信頼性と性能は保証されていません．RCJ2022では，無線ネットワークの環境として，eduroamが提供されています．アリーナ内は，eduroamのサービスエリアに入っています．なお，会場でチーム独自のWiFiアクセスポイントを構築することは禁止になります．

<br>

## 4 ロボット
RCJ2022で使用するロボットは，下記の項目を満たしている必要があります．
これらを満たしているかどうかの確認は，[Robot Inspection](https://github.com/RoboCupAtHomeJP/Rule2022/blob/rules/opl/robot_inspection.md)で行います．

### 4.1 ロボット台数について

1. ロボットの登録台数：1チームあたりのロボット台数は最大2台までとなっています．[Robot Inspection](https://github.com/RoboCupAtHomeJP/Rule2022/blob/rules/opl/robot_inspection.md)をクリアしたロボットのみを競技で使用することができます．

2. 競技タスク時の台数：1回の競技テストで使用できるロボットは1台のみです．異なる競技テストでは，他のロボットを使用することができます．

3. Finalsでの台数：Finalsでは，登録した最大2台のロボットを同時に使用することができます．

### 4.2 ロボットの仕様について
RoboCup@Home Open Platform Leagueに参加するロボットは，動作中に危害を加えないよう，下記の仕様に準拠する必要があります．

**サイズと重量**
1. 寸法:ロボットの寸法は，一般的なドア(多くの国では200cm×70cmとなっている)の制限を超えないようにしなければなりません．運営の方で，より大きなロボットの参加資格と登録を認めることがありますが，そのロボットが実際にアリーナに入れることを保証するものではありません．確認が必要な場合は，運営にお問い合わせください．

2. 重量：ロボットの重量と床にかかる圧力は，大会が開催される国のオフィスや居住用の建物の建築に関する規制を超えないようにする必要があります．

3. 運搬：チームは，ロボットをアリーナから素早く移動させられるようにする必要があります．もし，ロボットが自律的に移動できない場合，いかなる理由であれ，チームはロボットを迅速かつ容易に移動させられなくてはなりません．

**外観と安全性**

1. カバー：ロボット内部のハードウェア(電子機器やケーブル)は，カバーで覆い，安全性を確保してください．

2. ケーブル：ロボットから垂れ下がるようなケーブルは禁止としています．必ず，ロボットの内部で収まるようにしてください．

3. 安全性：ロボットに鋭利な刃物や人に危害を加えるような要素を入れてはいけません．

4. 迷惑行為：大きな音を出し続けたり，眩しい光で照らしたりしてはいけません．

6. ナビゲーション：ロボットによる安全な自律走行を行うため，障害物を回避できるナビゲーション技術が必須となります．

<!-- 「マーク：人工的なマークやパターンをつけてはいけません．」についてはどうするべきか？ -->
<!-- ロゴとかをつけているチームやハンドにQRマーカをつけているチームがある． -->

**非常停止ボタン**

1. アクセス性と視認性：全てのロボットは，非常停止ボタンを，目に見える位置かつ簡単に押せる位置に設置する必要があります．

2. 色：緊急停止ボタンは赤色であり，ロボット上で唯一の赤色ボタンでなければいけません．もし，他に赤色のボタンがあった場合は，運営がロボット上にある他の赤色ボタンをテープで覆うか，取り除くようチームに要求することがあります．

3. ロボットの動作：緊急停止ボタンが押された場合，ロボットとその部品は直ちに動きを停止しなければなりません．

<!-- スタートボタンについては要検討 -->

<!-- 外部機器については要検討 -->
<!-- ## 5 外部機器
チームが競技中に使用するロボットの一部でないものは全て「外部機器」とみなされます．全ての外部機器は，[Robot Inspection](https://github.com/RoboCupAtHomeJP/Rule2022/blob/rules/opl/robot_inspection.md)において，運営の認可を受けなければいけません．この際，運営は外部機器を自由に使用できるか，審判の監視下で使用できるかを指定し，採点に与える影響を判断します．なお，イヤホンやヘッドホンなどの無線機器の使用は，外部機器としても使用が認められません．また，大会主催者は，アリーナ内のネットワークやインターネット接続の可用性や信頼性に関して，いかなる保証や責任も負わないことに注意してください．チームは自己の責任において外部機器を使用することができます．
-->

<br>

## 5 競技構成
RCJ2022の競技は，[Rule2022](https://github.com/RoboCupAtHomeJP/Rule2022/blob/master/README.md)で公開されたタスクを数日間に分けて行っていきます．

### 5.1 採点方法について
RSJ2022では，ロボットによる競技タスクとFinalsでの研究発表(Technical Challenge)の2つの競技があります．採点は，2つの競技ごとに別々で行われ，別々に表彰されます．どちらとも参加していただいても，片方だけ参加して頂いても構いません．基本的には，参加しない競技がある場合は，事前に運営にその旨を伝えてください．

**競技タスク**
RCJ2012では，全チームが全競技タスクへの挑戦権を有しています．こちらは，別途アナウンスしたルール，配点，及びスケジュールに従って実施されます．ここでは，Finalsを除く各競技タスクにおける最高得点の合計点で競い合います．このとき，Robot Inspectionを除く各競技タスクの最高得点は500点となっています．

RCJ2022のOPLでは，Educationリーグとの繋がりを強くする方針で動いています．教育を目的としたEducationリーグにて培った技術力を，ぜひOPLで発揮していってもらいたいです．そのため，OPLでは，Educationリーグで行われている「Carry My Luggage」と「Receptionist」の2競技を採用し，この2競技だけでの表彰を行います(検討中)．

**Finals(Technical Challenge)**
RCJ2022では，全チームがFinalへの挑戦権を有しています．こちらは，別途アナウンスしたルール，配点，及びスケジュールに従って実施されます．独自の技術をアピールする機会となっており，そのプレゼンテーションやデモンストレーションを通して，審査員によって採点されます．

### 5.2 スケジュールについて
詳細なスケジュールについては，決まり次第，追記していきます．

<br>

## 6 競技時の注意
RCJの競技は，下記の項目に気を付けて，決まった手順通りに競技を実施していきます．

### 6.1 安全第一について

1. 緊急停止：競技の内外でロボットを操作する際，人や物に対して危険な動作をする可能性がある場合，チームはいつでもロボットを直ちに停止させなければいけません．

2. 要請での停止：審判員，技術委員会，組織委員会，連盟役員，評議員からロボットの停止を指示された場合，議論の余地はなく、直ちにロボットを停止させなければいけません．

3. ペナルティ：チームがこれらに従わない場合，チームとそのメンバーはRoboCup@Homeの運営の決定により，進行中の競技から即座に除外されます．さらに，そのチームとメンバーは，RoboCup連盟評議員会の決定により，1年以上の期間，今後の大会への出場を禁じられる場合があります．

### 6.2 チームメンバーの最大人数について

1. 競技時：競技中，アリーナ内に入れるチームメンバーの最大人数は1名です．ただし，ボランティアの協力が必要なテストは例外とします．

2. セットアップ：競技のセットアップ中は，アリーナ内のチームメンバーの人数に制限はありません．

3. Finals：Finalsでは，アリーナ内に入れる人数に制限はありません．

### 6.3 フェアプレイについて
大会期間中，全てのチームにフェアプレーと協力的な行動が求められています．特に，下記の時は注意してください．
- 他チームを評価するとき
- 審判をしているとき
- 他チームのロボットと交流する場合

ここでいうフェアプレイとは，下記のことを指しています．
- 不正をしようとしない（例：何もないところで自律的な行動を装う）
- ルールを悪用しない（例：課題を解決しようとせず、得点を狙う）
- 他のロボットをわざと失敗させようとしないこと
- 標準的なプラットフォームのロボットを改造しないこと

このルールを無視した場合，減点，失格，あるいは大会全体の失格といったペナルティが課されることがあります．

### 6.4 期待されるロボットの行動について
特に断らない限り，ロボットは礼儀正しく親切な人間がするのと同じように振る舞い，反応することが期待されています．これは，ロボットが与えられた課題をどのように解決する際にも当てはまります．ロボットの専門家でない一般的なユーザに伝わるような行動や振る舞いを心がけましょう．このとき，一般的なユーザは，ロボットを操作する具体的な手順を知らないことを考慮してください．

### 6.5 ロボットの自律性と遠隔操作について

1. 接触禁止：競技中，参加者は，タスクで必要とされる場合を除き，ロボットと接触することはできません．

2. 自然なインタラクション；ロボットとのインタラクションは，ジェスチャーと会話のみとしています．

3. 操作禁止：直接操作に類するものは禁止しています．

4. 遠隔操作：ロボットを遠隔操作することも禁止しています．また，ボタンを押したり，故意にセンサーに影響を与えるようなことも禁止しています．

5. ペナルティ：本ルールを無視した場合，競技または大会全体の失格につながります．

### 6.6 接触や衝突について

1. 接触：操作対象以外の物体に少しだけ触れてしまうことはある程度許容されますが，推奨はされません．ただ，ロボットが何かに衝突することは許されません．このとき，「安全第一」のルール(6.1節)が，他のいかなるルールよりも優先されます．

2. 衝突：競技中に，ロボットが何かに衝突した場合，そのロボットは直ちに停止されます．衝突によって，追加のペナルティが適用される場合もあります．

3. 機能的な接触：ロボットが物体を掴むために圧力をかけたり，競技によっては家具を押し退けたり，マニピュレータ以外の構造部分を用いて環境と相互作用することは認められています．しかし，ロボットは衝突でないインタラクションであることを明確に告げ，停止しないよう親切にお願いしなければなりません．ただし，審判が危険な動作が疑われる場合，即座にロボットを停止させることができます．

4. ロボット同士の回避：2台のロボットが遭遇するような競技の場合，両者は積極的に相手のロボットを避けようとしなければなりません．合理的な時間(例えば30秒)以内に，別のルートを目指さないロボットは排除される可能性があります．

### 6.7 ロボットの撤去について
上記のルールに従わないロボットは停止し，アリーナから撤去されます．

1. ロボットを撤去するかどうか，またいつ撤去するかは，審判員および競技を監視している技術委員(TC)メンバーの判断によって決められます．

2. 審判員や技術委員(TC)メンバーから指示があった場合，チームは直ちにロボットを停止し，進行中のテストの妨げにならないようにアリーナから撤去しなければなりません．

### 6.8 競技のスタートについて
デフォルトのスタート信号は，特に断りのない限り，ドアオープンになります．他のスタートシグナルを使用することも可能ですが，ロボット検査において技術委員(TC)が許可したものでなければなりません．

### 6.9 アリーナへの入場と退場について

1. スタート位置：特に明記されていない限り，ロボットはアリーナの外からスタートします．

2. 入場：ロボットは，ドアオープン後に，自律的にアリーナに入場しなければなりません．

3. 入場後：ロボットがドアオープンによって入場した後，使用した扉を再び閉めることができます．このとき，ロボットが通路を塞いでいない場合，入場したとみなされます．

### 6.10 オペレータについて
RCJ2022では，基本的にロボットのオペレータを，自チームから出して良いものとしています．ただし，オペレータ以外に登場する人については，運営によって選ばれた者によって競技が行われます．

### 6.11 時間制限について
RCJ2022では，各競技タスクで設定された制限時間にて運用していきます．競技の達成時間による加点なども特にありません．

### 6.12 リスタートについて
RCJ2022では，制限時間内であれば，何回でもリスタートを行っても構いません．ただし，リスタート直後のタスクの点数は半分になります．その後のタスクの点数は変わりません．

また，リスタート時に，ロボットが物体を持っている場合は，物体を持たせたままにするか，取り上げるかはチームが選択できます．ただし，取り上げた物体は，その後アリーナの外で保管します．そのため，取り上げた物体に関しては，その競技が終了するまで使うことが出来ません．

### 6.13 音声対話での聞き返しについて
RCJ2022では，全競技タスク共通して，音声対話での聞き返す回数による減点を行いません．ただし，競技時間による制限はありますので，7章で説明するデウス・エクス・マキナ等を駆使して，なるべくロボットを動作させ，得点することを推奨します．

<br>

## 7 デウス・エクス・マキナ(人の手を借りて特定のタスクを回避する)
ロボットは，タスクの主目的を達成しない限り，点数を得ることができません．しかし，ちょっとした不具合でロボットがタスクを達成できなくなるといったことがよく起こってしまいます．このような事態を防ぐために，ロボットは競技中，人に助けを求めることができるようになっています．音声認識が入らずにタスクがスタートしない，モノがつかめずにタスクが続行しないなど，チーム，観客の双方にとって望ましくない状況を起こさないために，それらを回避する手段を積極的に活用することを推奨します．

### 7.1 手順について
タスクの解決中に人の支援を要請する手順は下記の通りになります．

1. 支援のお願い：ロボットは，人の助けが必要であることをはっきりと示さなければいけません．特に，下記の項目には気を付けてください．
    - 支援の内容
    - 特定の目標または望ましい結果
    - どのような動作をしなければならないか (必要な場合)
    - ロボットとの対話方法の詳細 (必要な場合)

2. 支援後の対応：ロボットに指示された行動を行った後，人は要求された行動が完了したことをロボットに伝えなければいけません．

3. 感謝：ロボットは支援してくれた人に対して，丁寧にお礼を言わなければなりません．

### 7.2 例について
デウス・エクス・マキナは，各競技タスクごとに，様々なものが用意されています．詳細については，そちらを確認してください．また，追加してほしいデウス・エクス・マキナがあれば，Issueにて教えてください．運営の方で検討後，積極的に採用していきたいと思います．

RCJ2022では，特に下記のようなデウス・エクス・マキナを強く推奨しています．

- QRコードの積極活用による音声認識代替手段の確実な確保
- ロボットに搭載されたタッチディスプレイなどによるインタラクション方法の活用
- ロボットの音声やディスプレイ表示を用いたレフェリーへの指示

ドアを開けてください，椅子をどかしてください，モノを取ってハンドの中に入れてください，など，ロボットが分かりやすく指示したことについては，レフェリーは最大限対応します．ただし，音声が小さく聞き取れない，母国語では無い英語または日本語の指示が聞き取れない，画像が小さくて読めないなど，レフェリーの限界を超える点については対応できません．

ロボットへ直接コマンドを送信することなどは，デウス・エクス・マキナにおいても禁止されています．あくまで，ロボットとのインタラクションを簡易化するものになっています．

### 7.3 スコアについて
ロボットが，人に支援を要求するようなデウス・エクス・マキナを使用できる回数に制限はありません．しかし，デウス・エクス・マキナを使用した際のタスクの得点は，減点または失点することがあります．詳細については，各競技タスクのルールを確認してください．

<br>

## 8 不参加時のペナルティ
競技中のペナルティ以外に，無断で欠席した場合においてもペナルティが課せられます．
競技開始までの流れについては，下記の項目を確認してください．

1. スケジュールの公開：全チームが全ての競技タスクに参加することになります．ただし，参加登録時に参加しない競技を運営に伝えた場合は，スケジュールから除かれます．

2. アナウンス：各競技開始前に運営によるアナウンスがあります．もし，チームがテストに参加できなくなった場合(理由の如何を問わず)，チームリーダーはテスト開始の60分前までに運営にその旨を伝えなければなりません．

3. ペナルティ：予定された競技タスクが始まるときに，スタート位置にいないチームは，そのテストに参加することができません．チームが参加できないことを運営に伝えていない場合，各競技共通して500点の減点ペナルティが課されます．
