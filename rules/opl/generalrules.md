# General Rules & Regulations

RoboCup Japan Open 2022(以下RCJ2022)のOpen Platformリーグにおける競技は，このページに記載したGeneral Rulesに従って開催されます．
このGeneral Rulesについては，[RoboCup 2022 Rule Book](https://robocupathome.github.io/RuleBook/rulebook/master.pdf) Chapter 3 “General Rules & Regulations” をもとに作成しています．
[RoboCup 2022 Rule Book](https://robocupathome.github.io/RuleBook/rulebook/master.pdf)からの変更で，このページに記載していない事項については，考慮しないものとしています．

<br>

## 1 チーム登録と参加資格
チーム登録(Registration)は日本ロボカップ委員会を通して行われます．RCJ2022では，チーム登録に2つの段階があります．

1. 事前登録
2. 最終登録

事前登録や最終登録についての情報は，RoboCup@Home JPのメーリングリストやSlack上で発表される予定です．この際，チーム選考(Qualification)は行いません．申し込み全チームが参加できます．

### 1.1 事前登録について
RCJ2022における事前登録(OPL，DSPL，Education)は下記のリンクからお願いします．チーム登録締め切りは2月6日となっております．多数のご登録お待ちしております．

:arrow_forward: [事前登録フォーム](https://forms.gle/WoXSpmo4Csi7cLeP6)

なお，各リーグは下記の通り実施いたします．事前登録フォームへの記入の際は，こちらの開催形式を含めて記入してください．よろしくお願いいたします．

- OPL, Education：現地開催のみ
- DSPL：現地・オンラインのハイブリッド開催

### 1.2 最終登録について
最終登録については準備中です．決まり次第，追記していきます．

<br>

## 2 観客との交流
RoboCup@Homeの魅力は，ロボットが何をすべきか，タスクの中で実際に何を行っているかを観客に見せることでもあります．特に，ロボットが何をしているかという情報を観客に提供することは，リーグの発展にとっても重要なことです．そのため，YouTubeなどの動画配信サービスを用いて，競技の様子を配信することがあります．

<br>

## 3 シナリオ
ほとんどの競技タスクは，RoboCup@Homeのアリーナで行われますが，一部のテストは外の今まで知られていなかった公共の場所で行われることもあります．ここでは，アリーナとその内容，特にテストとリーグで共通する調度品等について説明します．

### 3.1 アリーナについて
RCJ2022におけるアリーナ情報については，現在準備中です．決まり次第，追記していきます．
<!-- RoboCup@Homeでは，それぞれの場所には，場所クラスが設定されています． -->

ロボットは現実の世界で機能する必要があるため，アリーナは固定されておらず，予告なく変更される場合があります．

1. メジャーチェンジ：日常的な環境では完全に静止していることが期待できない家具は，テストの間に少し移動されるかもしれません．家具の配置を変えたり，部屋の中を大きく移動したりすることはありませんが，ソファやテーブルが少し回転したり移動したりする可能性があります．RCJ2022では，そのような家具の固定位置を想定することは行いません．また，壁は固定され，部屋の機能は変わりませんが，通路は塞がれる可能性があります．

2. マイナーチェンジ：椅子が少し動いたり，ドアが少し閉まったりすることは避けられず，テスト中であってもいつ起こるかわかりません．

### 3.2 人(ユーザーやオペレータ)について
RoboCup@Homeでは，人の名前を使用したタスクがあります．アリーナにいるすべての人には，事前に定義された名前が割り当てられています．

### 3.3 物体について
RoboCup@Homeでは，物体の認識と操作を伴うタスクがあります．このタスクで使用する9個の物体のリストを作成しています．物体リストは下記のリンクから確認できます．リストには，各物体の写真，正式名称，物体カテゴリ(例えば，AppleはFruitsカテゴリに属す)が記載されます．ほとんどのオブジェクトは軽量で，ロボットで簡単に掴むことができるようになっています．各物体のカテゴリーごとに設置されている場所や，片づけるべき場所が決まっています．このカテゴリを参照することで，競技中にそのカテゴリの物体を見つけたり，そのカテゴリの物体を片づけたりしていきます．物体を改造することは許されませんので，気を付けてください．

また，競技タスクでは，物体を「既知の物体」と「未知の物体」として分けて使用していきます．このとき，既知の物体とは，下記の物体リストで公開している物体のことを指しています．また，未知の物体とは，物体リストにない物体で，把持・操作可能なものを指しています．競技タスクによっては，この未知の物体を使用することがあります．

:arrow_forward: [物体リスト(RCAP2021で使用された物体)](https://github.com/RoboCupAtHomeJP/AtHome2021/blob/master/Data/opl_known_object_list.pdf)

- 検討事項
  - 競技本番は，各チームが持ち寄せた物体を用いるべきか？

### 3.4 無線ネットワークについて
無線通信として，アリーナ環境にあるネットワークが提供されています．ただし，ネットワークの信頼性と性能は保証されていません．RCJ2022では，無線ネットワークの環境として，eduroamが提供されています．アリーナ内は，eduroamのサービスエリアに入っています．なお，会場でチーム独自のWiFiアクセスポイントを構築することは禁止になります．

<br>

## 4 ロボット
RCJ2022で使用するロボットは，下記の項目を満たしている必要があります．
これらを満たしているかどうかの確認は，[Robot Inspection](https://github.com/RoboCupAtHomeJP/Rule2022/blob/rules/opl/robot_inspection.md)で行います．

### 4.1 ロボット台数について
1. ロボットの登録台数：1チームあたりのロボット台数は最大2台までとなっています．[Robot Inspection](https://github.com/RoboCupAtHomeJP/Rule2022/blob/rules/opl/robot_inspection.md)をクリアしたロボットのみを競技で使用することができます．

2. 競技タスク時の台数：1回の競技テストで使用できるロボットは1台のみです．異なる競技テストでは，他のロボットを使用することができます．

3. Finalsでの台数：Finalsでは，登録した最大2台のロボットを同時に使用することができます．

### 4.2 オープンプラットフォームリーグにおけるロボットの仕様
RoboCup@Home Open Platform Leagueに参加するロボットは，動作中に危害を加えないよう，下記の仕様に準拠する必要があります．

**サイズと重量**
1. 寸法:ロボットの寸法は，平均的なドア(多くの国では200cm×70cmとなっている)の制限を超えないようにしなければなりません．運営の方で，より大きなロボットの参加資格と登録を認めることがありますが，そのロボットが実際にアリーナに入れることを保証するものではありません．確認が必要な場合は，運営にお問い合わせください．

2. 重量：ロボットの重量と床にかかる圧力は，大会が開催される国のオフィスや居住用の建物の建築に関する規制を超えないようにする必要があります．

3. 運搬：チームは，ロボットをアリーナから素早く移動させられるようにする必要があります．もし，ロボットを動かせない場合，いかなる理由であれ，チームはロボットを迅速かつ容易に移動させなくてはなりません．

**外観と安全性について**

1. カバー：ロボット内部のハードウェア(電子機器やケーブル)は，カバーで覆い，安全性を確保してください．

2. ケーブル：ロボットから垂れ下がるようなケーブルは禁止としています．必ず，ロボットの内部で収まるようにしてください．

3. 安全性：ロボットに鋭利な刃物や人に危害を加えるような要素を入れてはいけません．

4. 迷惑行為：大きな音を出し続けたり，眩しい光で照らしたりしてはいけません．

6. ナビゲーション：ロボットによる安全な自律走行を行うため，障害物を回避できるナビゲーション技術が必須となります．

<!-- 「マーク：人工的なマークやパターンをつけてはいけません．」についてはどうするべきか？ -->
<!-- ロゴとかをつけているチームやハンドにQRマーカをつけているチームがある． -->

**非常停止ボタン**

1. アクセス性と視認性：全てのロボットは，非常停止ボタンを，目に見える位置かつ簡単に押せる位置に設置する必要があります．

2. 色：緊急停止ボタンは赤色であり，ロボット上で唯一の赤色ボタンでなければいけません．もし，他に赤色のボタンがあった場合は，運営がロボット上にある他の赤色ボタンをテープで覆うか，取り除くようチームに要求することができます．

3. ロボットの動作：緊急停止ボタンが押された場合，ロボットとその部品は直ちに動きを停止しなければなりません．

<!-- スタートボタンについては要検討 -->

<!-- 外部機器については要検討 -->
<!-- ## 5 外部機器
チームが競技中に使用するロボットの一部でないものは全て「外部機器」とみなされます．全ての外部機器は，[Robot Inspection](https://github.com/RoboCupAtHomeJP/Rule2022/blob/rules/opl/robot_inspection.md)において，運営の認可を受けなければいけません．この際，運営は外部機器を自由に使用できるか，審判の監視下で使用できるかを指定し，採点に与える影響を判断します．なお，イヤホンやヘッドホンなどの無線機器の使用は，外部機器としても使用が認められません．また，大会主催者は，アリーナ内のネットワークやインターネット接続の可用性や信頼性に関して，いかなる保証や責任も負わないことに注意してください．チームは自己の責任において外部機器を使用することができます．
-->

## 5 コンペティションの構成

## Tasks
- [Robot Inspection](rules/opl/robot_inspection.md) (setup day)
- [Carry My Luggage](rules/opl/carry_my_luggage.md)
- [Receptionist](rules/opl/receptionist.md)
- [TidyUp for OPL](rules/opl/tidy_up.md)
- [General Purpose Service Robot (GPSR)](rules/opl/general_purpose_service_robot.md)
- Finals

<!-- ==================== ここまで修正 ====================


## 3.7 Organization of the competition
本節の全項目はRCJ2019では採用されません．
* Stage 1, 2という区分けはありません．RCJ2019では全チームが全タスクへの挑戦権を有します．また，別途アナウンスされるルール，配点，及びスケジュールで実施されます．
* Stage 2のOpen Challengeが実施されない代わりに，OPL，DSPLについては，全チームがFinalへの挑戦権を有し，独自の技術をアピールするOpen Demonstrationsの機会が与えられます．

## 3.8 Procedure during Tests
### 3.8.14 Time limits
各タスクで設定された制限時間にて運用します．

### 3.8.15 Restart
各タスクで設定されたリスタートルールにて運用します．

## 3.9 Bypassing features: CONTINUE rule
音声認識が入らずにタスクがスタートしない，モノがつかめずにタスクが続行しないなど，チーム，観客の双方にとって望ましくない状況を起こさないために，バイパス手段を積極的に活用することを推奨します．本家ルールに加えてRCJ2019では以下の項目を強く推奨します．
* QRコードの積極活用による音声認識代替手段の確実な確保
* ロボットに搭載されたタッチディスプレイなどによるHRIの活用．p44参照．
* ロボットの音声やディスプレイ表示を用いたレフェリーへの指示．例えば，ドアを開けてください，椅子をどかしてください，モノを取ってハンドの中に入れてください，など，ロボットが分かりやすく指示したことについては，レフェリーは最大限対応します．但し，音声が小さく聞き取れない，母国語では無い英語または日本語の指示が聞き取れない，画像が小さくて読めないなど，レフェリーの限界を超える点については対応できません．







## OPLで共通するルール
 - 各競技の最高得点は500点
   - Robot InspectionとFinalsを除く
 - チームはFinalsを除く各競技における最高得点の合計点で競う
 - FinalsはTechnical Challengeとして本競技と別枠で表彰する
   - Finalsのみの参加も可能
 - オペレータは自チームから出してよい
 - 制限時間内のリスタートは何回行ってもよい
   - リスタート直後のタスクの点数は半分になる(要検討)
   - リスタート時，ロボットが持っている場合は，物体を持たせたままにするか，取り上げるかはチームが選択できる
   - ただし取り上げた物体は，その後アリーナの外で保管
   - このTask中で取り上げた物体は使うことが出来ない
- 音声対話で聞き返す回数による減点はなし
- 競技の達成時間による加点はなし(要検討)

==================== ここまで修正 ==================== -->
