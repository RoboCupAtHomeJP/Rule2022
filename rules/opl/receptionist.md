# Receptionist

参考動画：https://youtu.be/p9ki89buY68 <br>
※ 参考動画は完璧ではありません．年によってルールも異なるので，あくまで参考程度にしてください．

※ 詳細なルールや配点につきましては，参加チーム間でのディスカッションを経て，確定版へ仕上げていきたいと考えています．このディスカッションにつきましては，RoboCup@Homeのslackコミュニティ内で行いますので，そちらへの参加をお願いします．

## OPLで共通するルール
 - 各競技の最高得点は500点
   - Robot InspectionとFinalsを除く
 - チームはFinalsを除く各競技における最高得点の合計点で競う
 - FinalsはTechnical Challengeとして本競技と別枠で表彰する
   - Finalsのみの参加も可能
 - オペレータは自チームから出してよい
 - 制限時間内のリスタートは何回行ってもよい
   - リスタート直後のタスクの点数は半分になる(要検討)
   - リスタート時，ロボットが持っている場合は，物体を持たせたままにするか，取り上げるかはチームが選択できる
   - ただし取り上げた物体は，その後アリーナの外で保管
   - このTask中で取り上げた物体は使うことが出来ない
- 音声対話で聞き返す回数による減点はなし
- 競技の達成時間による加点はなし(要検討)
- 競技で使用するオブジェクトは[AtHome2021で使用されたもの](https://github.com/RoboCupAtHomeJP/AtHome2021/blob/master/Data/opl_known_object_list.pdf)を用いる

## メインゴール
このタスクでは，会場に到着したゲストへの受付を行い，リビングルームに案内することを想定しています．このとき，ゲストの名前や好きな飲み物等を聞き，オーナ(ジョン)に紹介します．また，到着したばかりのゲストに空いている席を案内します．

 **※ Educationリーグの競技とは採点方式のみ異なります**

## フォーカス
このタスクは，人認識，既知環境でのマッピングやナビゲーション，音声対話，タスクプランニングなどに焦点を当てています．

## セットアップ
- ロケーション： 家庭環境を模したアリーナ環境が用いられます．特に競技はリビングルームで行われます．アリーナ内は事前にマッピングすることができます(既知の環境)．
- スタートロケーション： ロボットは，アリーナ内のあらかじめ決められた場所(入口ドア付近)からスタートします．
- オーナ(ジョン)：オーナ(ジョン)の位置は，事前にロボットに知らされています．リビングルームの指定された場所に座っています．

## シナリオ
### a. スタートフェーズ
1. 競技時間：競技時間は10分間になります．
2. 配置：レフェリーは，チームにロボットをスタート位置へ移動させるよう指示します．
3. スタート：レフェリーはスタートの合図を出し，タイマーをスタートさせます．同時にチームは最後の簡単なセットアップ(スタートボタンを押す等)を完了し，エリアを離れます．このとき，ボタンを2つ以上押すなど複雑なセットアップ手順の実施は認められません．また，これ以降チームがロボットに触れると即座に失格になります．
4. ゲスト：各ゲストにはあらかじめ名前と好きな飲み物が設定されています．
5. ゴール：1人のゲストに対して，レセプションフェーズとガイドフェーズを行います．これを2人に行うことを目標としています．

### b. レセプションフェーズ
1. ゲストの検出：ロボットは会場に到着し，部屋に入ってきたゲストを検出します．
2. ゲストの受付：その後，ロボットはゲストの名前と好きな飲み物についての情報を聞きます．このとき，ロボットが名前や好きな飲み物について理解できなかった場合，もう一度発言を繰り返すように要求することができます．ここで，ロボットはゲストの年齢も推定します．
3. ゲストの紹介：到着したゲストをオーナであるジョンに紹介します．このとき，ロボットは紹介する人を指さし，名前と好きな飲み物について紹介します．もし名前を間違得てしまった場合は減点されてしまいます．

### c. ガイドフェーズ
1. 案内：ゲストを空いている席へと案内し，その席に座ってもらいます．このとき，ロボットはゲストが座れる場所を指さします．
2. 席の入れ替え：新しいゲストが来るたびに，リビングにいるゲストたちの場所を交換します．このとき，レセプションフェーズにて推定した年齢をもとに，最年長の方を優先してソファーに座らせて上げるように誘導します．

## デウスエクスマキナ
本タスクでは，次のデウスエクスマキナが採用されます．デウスエクスマキナでは該当アクションの点数は入らないが，より簡単な手法でアクションをスキップし，タスクを継続することができます．

<table>
  <tr>
    <th> <b>Action<b> </th>
    <th> <b>Bypassing<b> </th>
  </tr>
  <tr>
    <td> ドアを開閉 </td>
    <td>
      <ul>
        <li> ロボットからドアを開けることを要求することができる </li>
        <li> ロボットに要求された場合，審査員はドアを開ける </li>
      </ul> 
    </td>
  </tr>
   <tr>
    <td> オーナ(ジョン)の特定 </td>
    <td>
      <ul>
        <li> オーナ(ジョン)にマーカを持たせることで，オーナ(ジョン)を特定する </li>
      </ul> 
    </td>
  </tr>
  <tr>
    <td> 空いている席の特定 </td>
    <td>
      <ul>
        <li> 空いている席にマーカを設置することで，席が空いていることを特定する </li>
      </ul> 
    </td>
  </tr>
  <tr>
    <td> 年齢の推定 </td>
    <td>
      <ul>
        <li> ゲストの年齢を推定するのではなく，音声対話によって年齢を聞く </li>
        <li> この場合，「最年長の方をソファに座らせる」の得点は半分になる </li>
      </ul> 
    </td>
  </tr>
</table>

## スコアシート
<table>
  <tr>
    <th> <b>Action</b> </th>
    <th> <b>Score</b> </th>
  </tr>
  <tr>
    <td colspan="2" align="center"> <b> メインタスク </b> </td>
  </tr>
  <tr>
    <td> 1人目のゲストをオーナ(ジョン)に紹介する <br> 
      <ul>
        <li> 1人目のゲストの名前を紹介する </li>
        <li> 1人目のゲストの好きな飲み物を紹介する </li>
        <li> 紹介中，1人目のゲストを指差す／向く </li>
      </ul> 
    </td>
    <td align="center"> <!-- 50 <br>　--> 15 <br> 15 <br> 20 </td>
  </tr>
  <tr>
    <td> 1人目のゲストに空いている席を案内する <br> 
      <ul>
        <li> 空席を検出する </li>
        <li> 空席を指差す／向いて提供する </li>
      </ul> 
    </td>
    <td align="center"> <!-- 75 <br> --> 35 <br> 40 </td>
  </tr>
  <tr>
    <td> 2人目のゲストをオーナ(ジョン)に紹介する <br> 
      <ul>
        <li> 2人目のゲストの名前を紹介する </li>
        <li> 2人目のゲストの好きな飲み物を紹介する </li>
        <li> 紹介中，2人目のゲストを指差す／向く </li>
      </ul> 
    </td>
    <td align="center"> <!-- 50 <br> --> 15 <br> 15 <br> 20 </td>
  </tr>
  <tr>
    <td> 2人目のゲストに空いている席を案内する <br> 
      <ul>
        <li> 空席を検出する </li>
        <li> 空席を指差す／向いて提供する </li>
      </ul> 
    </td>
    <td align="center"> <!-- 75 <br> --> 35 <br> 40 </td>
  </tr>
  <tr>
    <td colspan="2" align="center"> <b> ボーナスタスク </b> </td>
  </tr>
  <tr>
    <td> ゲストに対して入り口のドアを開けてあげる </td>
    <td align="center"> 2 × 100 </td>
  </tr>
  <tr>
    <td> 最年長の方をソファに座らせる <br> </td>
    <td align="center"> 50 </td>
  </tr>
  <tr>
    <td colspan="2" align="center"> <b>ペナルティ</b> </td>
  </tr>
  <tr>
    <td> 不参加(無断) </td>
    <td align="center"> -500 </td>
  </tr>
  <tr>
    <td> <b> 合計(ボーナスタスクを含む) </b> </td>
    <td align="center"> <b> 500 </b> </td>
  </tr>
</table>

※ Educationリーグと同じ競技を採用していますが，差別化のため異なる採点方式を用いています．

<!--
## 運営のやること
- 準備
  - ボランティア3名に名前と飲み物を割り当てる．
  - リビングルームに人を配置する(配置し直す)．
  - ロボットから要求されたらドアを開ける．
- アナウンス(競技スタート2時間前)
  - ロボットのスタート地点の選択し，アナウンスする
  - ボランティアをジョンと選択し，アナウンスする．
--!>
